(this["webpackJsonpschedule-hub-data-collection"]=this["webpackJsonpschedule-hub-data-collection"]||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),l=(a(78),a(18)),i=a.n(l),s=a(11),u=a(7),m=a(64),d=a(66),p=a(136),h=a(151),f=a(155),b=a(133),g=a(148),v=a(149),E=a(137),y=a(138),x=a(139),k=a(140),w=a(141),j=a(142),S=a(143),O=a(152),C=a(144),N=a(105),T=a(145),B=a(156),L=a(150),R=a(104),W=a(68),I=a(42),M=a(43),U=a(44),D=a(146),z=a(147),F=a(26),P=a.n(F),_=a(48),q=a(37),A="https://api.uwaterloo.ca/v2",V=function e(t){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e3;Object(q.a)(this,e),this.sendUrlRequest=function(e){var t,n,r,c,o,l,s=arguments;return i.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:{},u.next=3,i.a.awrap(P.a.get(e,{baseURL:A,params:Object(_.a)({},t,{key:a.apiKey}),timeout:a.timeout,timeoutErrorMessage:"timeout ".concat(a.timeout)}));case 3:if(n=u.sent,r=n.data,c=r.meta,o=r.data,200===c.status){u.next=9;break}throw(l=Error(c.message)).name="UW ".concat(c.status),l;case 9:return u.abrupt("return",o);case 10:case"end":return u.stop()}}))},this.sendBulkUrlRequest=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=P.a.create({baseURL:A,timeout:a.timeout,timeoutErrorMessage:"timeout ".concat(a.timeout)}),r=e.map((function(e){return n.get(e,{params:Object(_.a)({},t,{key:a.apiKey})})}));return r},this.getSubjectCodes=function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(a.sendUrlRequest("/codes/subjects.json"));case 2:return e=t.sent,t.abrupt("return",e.map((function(e){return e.subject})));case 4:case"end":return t.stop()}}))},this.getCourseNumbers=function(e){var t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(a.sendUrlRequest("/courses/".concat(e,".json")));case 2:return t=n.sent,n.abrupt("return",t.map((function(e){return e.catalog_number})));case 4:case"end":return n.stop()}}))},this.getCourseSchedule=function(e,t){var n,r,c,o=arguments;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:void 0,r="/courses/".concat(e,"/").concat(t,"/schedule.json"),l.next=4,i.a.awrap(a.sendUrlRequest(r,{term:n}));case 4:return c=l.sent,l.abrupt("return",c);case 6:case"end":return l.stop()}}))},this.getCourseScheduleBulk=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=e.map((function(e){var t=e.split(" "),a=Object(s.a)(t,2),n=a[0],r=a[1];return"/courses/".concat(n,"/").concat(r,"/schedule.json")}));return a.sendBulkUrlRequest(n,{term:t})},this.getClassScheduleBulk=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=e.map((function(e){return"/courses/".concat(e,"/schedule.json")}));return a.sendBulkUrlRequest(n,{term:t})},this.apiKey=t,this.timeout=n},G=a(63),H=a.n(G),K=(a(23),function(e){var t=["Th","M","T","W","F"],a=e.subject,n=e.catalog_number,r=e.section.split(" "),c=Object(s.a)(r,2),o=c[0],l=c[1];return e.classes.map((function(e){var r=e.date,c=r.start_date,i=r.end_date,s=r.start_time,u=r.end_time,m=e.date.weekdays;if(c||i)return[];var d=[];return t.forEach((function(e){m.includes(e)&&(d.push({day:e,startTime:s,endTime:u,blockInfo:{courseCode:"".concat(a," ").concat(n),sectionType:o,sectionNum:l}}),m=m.replace(e,""))})),d})).flat()}),Y=function(e){var t=e.split(":"),a=Object(s.a)(t,2);return 6*a[0]+a[1]/10},J=Object(m.a)((function(e){return{paper:function(t){return{display:"flex",height:"100%",padding:e.spacing(.5),border:t.blockInfo.sectionNum.startsWith("0")?"1px solid ".concat(e.palette.secondary.main):"1px solid ".concat(e.palette.ternary.main)}},sectionText:{lineHeight:1.2,textAlign:"right",whiteSpace:"pre"}}}));function X(e){var t=J(e),a=e.startTime,n=e.endTime,c=e.blockInfo,o=c.courseCode,l=c.sectionType,i=c.sectionNum,s=Y(a),u=Y(n)-s;return r.a.createElement(g.a,{height:u*(64/6),width:128,position:"absolute",top:(s-Y("8:00"))*(64/6)},r.a.createElement(W.a,{variant:"outlined",className:t.paper},r.a.createElement(g.a,{flexGrow:1},r.a.createElement(b.a,{variant:"body2",display:"block"},o),r.a.createElement(b.a,{variant:"caption",display:"block"},"".concat(a,"-").concat(n))),r.a.createElement(g.a,null,r.a.createElement(b.a,{variant:"caption",display:"block",className:t.sectionText},"".concat(l,"\n").concat(i)))))}var Q=Object(m.a)((function(e){var t="1px solid ".concat(e.palette.divider);return{root:{display:"table"},captionCell:{backgroundColor:e.palette.background.paper,padding:e.spacing(1)},row:{display:"table-row","& > *":{display:"table-cell",position:"sticky",borderBottom:t,borderRight:t,width:128,minWidth:128,maxWidth:128},"& > *:first-child":{left:0,borderLeft:t,width:72,minWidth:72,maxWidth:72}},weekdayRow:{"& > *":{position:"sticky",top:0,zIndex:3,borderTop:t},"& > *:first-child":{zIndex:4}},timeColumn:{zIndex:2,"& > *":{borderBottom:t,height:64},"& > *:last-child":{borderBottom:"none"}}}})),Z=["8 am","9 am","10 am","11 am","12 pm","1 pm","2 pm","3 pm","4 pm","5 pm","6 pm","7 pm","8 pm","9 pm","10 pm"],$=["Monday","Tuesday","Wednesday","Thursday","Friday"],ee=["M","T","W","Th","F"];function te(e){var t=Q(),a=(e.schedule||[]).map(K).flat();return r.a.createElement("div",{className:t.root},r.a.createElement(g.a,{className:"".concat(t.row," ").concat(t.weekdayRow)},r.a.createElement(g.a,{className:t.captionCell}),$.map((function(e){return r.a.createElement(b.a,{variant:"subtitle2",key:e,className:t.captionCell},e)}))),r.a.createElement(g.a,{className:t.row},r.a.createElement(g.a,{className:t.timeColumn},Z.map((function(e){return r.a.createElement(b.a,{variant:"subtitle2",key:e,className:t.captionCell},e)}))),ee.map((function(e){return r.a.createElement(g.a,{position:"relative",key:e},a.filter((function(t){return t.day===e})).map((function(t){return r.a.createElement(X,{key:"".concat(e).concat(t.startTime),startTime:t.startTime,endTime:t.endTime,blockInfo:t.blockInfo})})))}))))}te.defaultProps={schedule:[]};var ae=te,ne=a(153),re=a(135),ce=a(154),oe=a(134),le=Object(m.a)((function(e){return{helpText:{whiteSpace:"pre"},paper:{padding:e.spacing(1)},popover:{pointerEvents:"none"},preferenceHeader:{color:"#666666"}}}));var ie=function(e){var t=e.label,a=e.helpMsg,c=e.leftLabel,o=e.rightLabel,l=e.sliderValue,i=e.onSliderValueChange,u=le(),m=Object(n.useState)(null),d=Object(s.a)(m,2),p=d[0],h=d[1],f=function(){h(null)},v=Boolean(p);return r.a.createElement(g.a,null,r.a.createElement(b.a,{component:"span",gutterBottom:!0,className:u.preferenceHeader},r.a.createElement(g.a,{display:"inline",fontWeight:"fontWeightMedium"},"".concat(t," ")),r.a.createElement(b.a,{display:"inline","aria-owns":v?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:function(e){h(e.currentTarget)},onMouseLeave:f},r.a.createElement(oe.a,{color:"action",fontSize:"small"})),r.a.createElement(ne.a,{id:"mouse-over-popover",className:u.popover,classes:{paper:u.paper},open:v,anchorEl:p,anchorOrigin:{vertical:"bottom",horizontal:"left"},onClose:f,disableRestoreFocus:!0},r.a.createElement(b.a,{style:{whiteSpace:"pre"}},a))),r.a.createElement(re.a,{container:!0,spacing:1},r.a.createElement(re.a,{item:!0},r.a.createElement(b.a,{color:"textSecondary"},c)),r.a.createElement(re.a,{item:!0,xs:!0},r.a.createElement(ce.a,{display:"inline",value:l,onChange:i})),r.a.createElement(re.a,{item:!0},r.a.createElement(b.a,{color:"textSecondary"},o))))},se="https://qemn8c6rx9.execute-api.us-east-2.amazonaws.com/test",ue="".concat(se,"/returnscheduleforrating"),me="".concat(se,"/handleuserrating"),de=new V("4ad350333dc3859b91bcf443d14e4bf0",null),pe=Object(m.a)((function(e){var t;return{root:{display:"flex",flexDirection:"column",height:"100%",overflowY:"hidden"},contents:Object(u.a)({display:"flex",flexDirection:"row",flexGrow:1,overflowX:"hidden",maxHeight:"100%"},e.breakpoints.down("xs"),{padding:0}),instrModal:{alignItems:"center",display:"flex",justifyContent:"center"},instrPaper:{alignItems:"center",display:"flex",flexDirection:"column",outline:"none",padding:e.spacing(2)},loadingFullPage:{zIndex:e.zIndex.drawer+1,color:"#fff"},mainContents:(t={},Object(u.a)(t,e.breakpoints.down("xs"),{padding:0}),Object(u.a)(t,e.breakpoints.up("md"),{padding:e.spacing(2)}),Object(u.a)(t,"flexGrow",0),Object(u.a)(t,"overflow","hidden"),Object(u.a)(t,"display","flex"),Object(u.a)(t,"flexDirection","column"),t),timetableBox:{display:"inline-block",maxWidth:"100%",alignSelf:"flex-start",overflow:"auto",border:"2px solid ".concat(e.palette.divider)},mobileStepper:{borderTop:"1px solid ".concat(e.palette.divider)},verticalStepper:{alignSelf:"flex-start"},verticalStepperButton:{marginRight:e.spacing(1)},verticalStepperBox:{display:"flex",backgroundColor:e.palette.common.white,width:"25%",overflowY:"auto"},welcomeLogo:{display:"block",marginLeft:"auto",marginRight:"auto",marginTop:e.spacing(4),marginBottom:e.spacing(4),width:128},sliderBox:Object(u.a)({paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},e.breakpoints.down("xs"),{padding:e.spacing(1)}),thankText:Object(u.a)({},e.breakpoints.down("xs"),{padding:e.spacing(2)})}})),he=Object(d.a)({palette:{primary:{main:I.a[300],dark:"#ba2d65",light:"#ff94c2"},secondary:{main:M.a[500],light:"#6ec6ff",dark:"#0069c0"},ternary:{main:U.a[500],light:"#80e27e",dark:"#087f23"}}});var fe=function(){var e=pe(),t=Object(n.useState)(!0),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(0),u=Object(s.a)(l,2),m=u[0],d=u[1],I=Object(n.useState)(Array(5).fill(50)),M=Object(s.a)(I,2),U=M[0],F=M[1],_=Object(n.useState)(Array(5).fill(50)),q=Object(s.a)(_,2),A=q[0],V=q[1],G=Object(n.useState)(Array(5).fill(50)),K=Object(s.a)(G,2),Y=K[0],J=K[1],X=Object(n.useState)(!1),Q=Object(s.a)(X,2),Z=Q[0],$=Q[1],ee=Object(n.useState)([]),te=Object(s.a)(ee,2),ne=te[0],re=te[1],ce=Object(n.useState)(Array(5).fill(void 0)),oe=Object(s.a)(ce,2),le=oe[0],se=oe[1];Object(n.useEffect)((function(){var e=function(e,t){var a=(new Date).getTime(),n=de.getClassScheduleBulk(e);P.a.all(n).then((function(e){var n=e.map((function(e){return e.data.data[0]}));se((function(e){var a=e.slice();return a[t]=n,a})),console.log(n),console.log((new Date).getTime()-a)})).catch((function(e){console.log(e)}))};!function(){var t,a;i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.awrap(P.a.get(ue,{timeout:5e3}));case 3:t=n.sent,a=t.data,console.log(a),re(a),a.forEach((function(t,a){return e(t.schedule,a)})),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0.message);case 13:case"end":return n.stop()}}),null,null,[[0,10]])}()}),[]);var fe=function(){return o(!1)},be=function(){return d((function(e){return e-1}))},ge=function(e){if(e){$(!0);var t=ne.map((function(e,t){return{id:e.id,early_class:U[t]/100,even_dist:A[t]/100,together_class:Y[t]/100}}));console.log(t),P.a.post(me,t).then((function(e){d((function(e){return e+1})),$(!1)})).catch((function(e){console.log(e.message)}))}else d((function(e){return e+1}))},ve=function(e){return function(t,a){e((function(e){var t=e.slice();return t[m]=a,t}))}},Ee=ve(F),ye=ve(V),xe=ve(J),ke=m<ne.length&&r.a.createElement(g.a,{className:e.sliderBox},r.a.createElement(ie,{label:"First class",helpMsg:"In general, do the days start early or late?",leftLabel:"Early",rightLabel:"Late",sliderValue:U[m],onSliderValueChange:Ee}),r.a.createElement(ie,{label:"Even Distribution",helpMsg:"Does the schedule has approximately the same number of classes every day?",leftLabel:"Even",rightLabel:"Uneven",sliderValue:A[m],onSliderValueChange:ye}),r.a.createElement(ie,{label:"Cluster Classes",helpMsg:"Are the classes back to back or more separated from each other?",leftLabel:"Together",rightLabel:"Separate",sliderValue:Y[m],onSliderValueChange:xe}));return r.a.createElement(E.a,{theme:he},r.a.createElement(y.a,null),r.a.createElement("div",{className:e.root},r.a.createElement(x.a,{position:"static",color:"primary",className:e.appBar},r.a.createElement(k.a,null,r.a.createElement(b.a,{variant:"h6"},"Schedule Planner Data Collection"))),r.a.createElement(w.a,{open:Z||m<ne.length&&!le[m],className:e.loadingFullPage},r.a.createElement(j.a,{color:"inherit"})),r.a.createElement(S.a,{maxWidth:"xl",className:e.contents},r.a.createElement(O.a,{smDown:!0},r.a.createElement(g.a,{className:e.verticalStepperBox},r.a.createElement(C.a,{activeStep:m,orientation:"vertical",className:e.verticalStepper,connector:r.a.createElement(N.a,{className:e.verticalStepConnector})},ne.map((function(t,a){return n=t.id,c="Schedule ".concat(a+1),o="Read the schedule and rate its timing.",r.a.createElement(p.a,{key:n},r.a.createElement(h.a,null,c),r.a.createElement(f.a,null,r.a.createElement(b.a,null,o),r.a.createElement(g.a,{my:2},r.a.createElement(v.a,{className:e.verticalStepperButton,onClick:be,disabled:0===m||m===ne.length},"Back"),r.a.createElement(v.a,{variant:"contained",color:"primary",className:e.verticalStepperButton,onClick:function(){return ge(m+1>=ne.length)}},m+1>=ne.length?"Finish":"Next"))));var n,c,o})))),r.a.createElement(T.a,{orientation:"vertical"})),m<ne.length?r.a.createElement(g.a,{className:e.mainContents},r.a.createElement(g.a,{className:e.timetableBox},r.a.createElement(ae,{schedule:le[m]})),ke):r.a.createElement(g.a,{className:e.mainContents},r.a.createElement(b.a,{className:e.thankText},"Thank you! Your ratings have been submitted."))),r.a.createElement(O.a,{mdUp:!0},m<ne.length&&r.a.createElement(B.a,{variant:"dots",steps:ne.length,position:"static",className:e.mobileStepper,activeStep:m,nextButton:r.a.createElement(v.a,{size:"medium",onClick:function(){return ge(m+1>=ne.length)}},m+1===ne.length?"Finish":"Next",r.a.createElement(D.a,null)),backButton:r.a.createElement(v.a,{size:"medium",onClick:be,disabled:0===m},r.a.createElement(z.a,null),"Back")}))),r.a.createElement(L.a,{open:c,onClose:fe,BackdropProps:{timeout:500},className:e.instrModal,closeAfterTransition:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0},r.a.createElement(R.a,{in:c},r.a.createElement(W.a,{className:e.instrPaper},r.a.createElement(b.a,{variant:"h2",color:"primary"},"Welcome!"),r.a.createElement("img",{src:H.a,alt:"Schedule Planner Data Collection",className:e.welcomeLogo}),r.a.createElement(b.a,{gutterBottom:!0,align:"center"},"You will be given 5 class schedules. Please rate each schedule based on its timing (not the subjects). After that, you can enter your UWaterloo email for a chance to win a prize!"),r.a.createElement(g.a,{mt:2,mx:"auto"},r.a.createElement(v.a,{variant:"outlined",color:"primary",onClick:fe},"Get started"))))))};o.a.render(r.a.createElement(fe,null),document.getElementById("root"))},63:function(e,t,a){e.exports=a.p+"static/media/icon.a7b1598b.svg"},73:function(e,t,a){e.exports=a(103)},78:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.dc0d2822.chunk.js.map